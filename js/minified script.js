const pokemonRepository=function(){const t=[],e=($("ul"),$("#modal-container")),n="https://pokeapi.co/api/v2/pokemon/?limit=150';";function o(e){t.push(e)}function i(t){pokemonRepository.loadDetails(t).then(function(){a(t)})}function a(t){e.html("");const n=$('<div class="modal"></div>'),o=$("<h3>");o.html(t.name.charAt(0).toUpperCase()+t.name.slice(1));const i=$('<img src="'+t.imageUrl+'">');i.addClass("modal-img");const a=$("<p>Height: "+t.height+"</p>"),p=$("<p>Weight: "+t.weight+"</p>"),c=$("<p>Type(s): "+t.types+"</p>"),l=$('<button class="modal-close">"Close"</button>');l.on("click",function(){s()}),n.append(o),n.append(i),n.append(a),n.append(p),n.append(c),e.append(n),n.append(l),e.addClass("is-visible")}function s(){e.removeClass("is-visible")}return $(document).on("keydown",function(t){"Escape"===t.key&&e.hasClass("is-visible")&&s()}),e.on("click",function(t){t.target===e&&s()}),{add:o,getAll:function(){return t},addListItem:function(t){const e=$(".list-group"),n=$('<li class="list-group-item"></li>');$(e).append(n);const o=$('<button class="btn" data-toggle="modal" data-target="#PokeModal"></button>');$(o).text(t.name),$(n).append(o),o.on("click",function(){i(t)})},search:function(e){t.filter(function(t){if(t.name===e)return t})},showDetails:i,loadList:function(){return $.ajax(n,{dataType:"json"}).then(function(t){$.each(t.results,function(t,e){o({name:e.name.charAt(0).toUpperCase()+e.name.slice(1),detailsUrl:e.url})})}).catch(function(t){console.error(t)})},loadDetails:function(t){const e=t.detailsUrl;return $.ajax(e).then(function(e){t.imageUrl=e.sprites.front_default,t.height=e.height,t.weight=e.weight,t.types=Object.keys(e.types),2==e.types.length?t.types=[e.types[0].type.name,e.types[1].type.name]:t.types=[e.types[0].type.name]}).catch(function(t){console.error(t)})},showModal:a,hideModal:s}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});
